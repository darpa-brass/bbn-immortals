apply plugin: immortals.CoreDefinitions
apply plugin: immortals.Java8Component
apply plugin: immortals.PublishJavaDfu

jar {
    manifest {
        attributes "Implementation-Title": "IMMoRTALS-LoggingServer",
                "Main-Class": "mil.darpa.immortals.analytics.protocols.log4j.LoggingServerMain"
    }

    from { configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } }
}

task(copyArtifacts) << {
    copy {
        from('build/libs/') {
            include '*.jar'
        }
        into('./')
    }
}

jar.finalizedBy(copyArtifacts)

dependencies {
    compile project(':components:analytics-log4j-client')
    compile project(':components:bundles:product-analysis-bundle-base')
    compile project(':components:bundles:product-validator-bundle')
    compile 'io.airlift:airline:0.7'
    compile "org.slf4j:slf4j-api:${project.slf4jVersion}"
    compile "org.slf4j:slf4j-log4j12:${project.slf4jVersion}"
    compile "ch.qos.logback:logback-classic:1.1.7"
    compile "ch.qos.logback:logback-core:1.1.7"
    testCompile group: 'junit', name: 'junit', version: '4.11'
}
