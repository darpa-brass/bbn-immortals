apply plugin: immortals.CoreDefinitions
apply plugin: immortals.JavaDfuWithoutAndroid
apply plugin: immortals.DfuBase
apply plugin: immortals.PublishJavaDfu

task('fatjar', type: Jar) {
    manifest {
        attributes "Implementation-Title": "ImmortalsWebsocket",
                "Main-Class": "mil.darpa.immortals.websockets.ImmortalsWebsocketConnector"
    }
    baseName = project.name + '-all'

    from {
        configurations.compile.filter {!it.name.endsWith("android.jar") }.collect {
            it.isDirectory() ? it : zipTree(it)
        }
    }
    with jar
}

dependencies {
    compile project(':core')
    compile 'javax.websocket:javax.websocket-api:1.1'
    compile 'org.java-websocket:Java-WebSocket:1.3.4'
    testCompile group: 'junit', name: 'junit', version: '4.11'
}
